<blueprint default-activation="eager"
           xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

    <!--    <reference id="cacheservice" interface="bi.meteorite.core.api.cache.CacheManagerService"/>-->
    <reference id="cacheservice" interface="com.hazelcast.core.HazelcastInstance"/>

    <bean id="cacheManagerTokenStore" class="tokenprovider.CacheManagerTokenStore"
          init-method="init">
        <property name="bcontext" ref="blueprintBundleContext"/>
        <property name="cacheManagerService" ref="cacheservice"/>
    </bean>
    <bean id="tokenProvider" class="tokenprovider.TokenProviderImpl">
        <property name="mtokenStore" ref="cacheManagerTokenStore"/>
    </bean>

    <bean id="loginService" class="bi.meteorite.core.security.jaas.JaasLoginManager">
        <property name="realm" value="karaf"/>
    </bean>


    <!-- Service objects -->

    <service ref="tokenProvider" interface="bi.meteorite.core.api.security.tokenprovider.TokenProvider"/>

    <service ref="loginService" interface="bi.meteorite.core.api.security.AdminLoginService"/>


</blueprint>